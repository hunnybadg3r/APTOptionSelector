<Window x:Class="APTOptionSelector.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:APTOptionSelector"
        mc:Ignorable="d"
        ResizeMode="NoResize"
        Title="APT Option Selector" Height="820" Width="1200">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 헤더 -->
        <TextBlock x:Name="HeaderText" Text="공간선택 및 추가선택품목 안내" 
                   FontSize="20" FontWeight="Bold" 
                   Margin="10"/>

        <!-- 메인 데이터 그리드 -->
        <DataGrid x:Name="OptionsGrid" 
                  Grid.Row="1"
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding Options}"
                  SelectionMode="Single"
                  IsReadOnly="True"
                  Margin="10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="유형" Binding="{Binding Category}" Width="100"/>
                <DataGridTextColumn Header="코드" Binding="{Binding Code}" Width="60"/>
                <DataGridTemplateColumn Header="선택" Width="60">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox IsChecked="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}"
                                     Tag="{Binding Code}"
                                     IsEnabled="{Binding IsEnabled}"
                                     Checked="OptionCheckBox_Changed"
                                     Unchecked="OptionCheckBox_Changed"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="선택품목" Binding="{Binding Name}" Width="250"/>
                <DataGridTextColumn Header="공급가액" Binding="{Binding Price, StringFormat=N0}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="계약금" Binding="{Binding DownPayment, StringFormat=N0}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="중도금" Binding="{Binding Interim, StringFormat=N0}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="잔금" Binding="{Binding Balance, StringFormat=N0}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="선택 시 유의사항" 
                          Binding="{Binding SelectionConstraintMessage}" 
                          Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- 하단 합계 및 선택 제약 표시 -->
        <StackPanel x:Name="FooterPanel" Grid.Row="2" Margin="10">
            <TextBlock x:Name="TotalPriceText" 
                       FontSize="16" FontWeight="Bold"
                       Text="총 선택 금액: 0 원"/>
        </StackPanel>
    </Grid>
</Window>
